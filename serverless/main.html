<html>

<head>
  <title>Main</title>
  <script type="text/javascript" src="./jquery-3.5.1.min.js"></script>
</head>

<body>
  <form>
    <table style="height: 114px;" width="80%" align="center">
      <tbody>
        <tr style="height: 18px;">
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
        </tr>

        <tr style="height: 18px;">
          
          
          <td style="width: 107.333px; height: 18px;" colspan="2" align="center">&nbsp;<input type="text"
              align="middle" id='auth'/></td>
          <td style="width: 107.333px; height: 18px;"><input type=button value="search" id="sc"/></td>
          <td style="width: 107.333px; height: 18px;"></td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
        </tr>
        <tr style="height: 18px;">
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
        </tr>

        

        <tr style="height: 18px;">
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
          <td style="width: 107.333px; height: 18px;">&nbsp;</td>
        </tr>
      </tbody>
    </table>
    <div id='ls'> </div>
  </form>
</body>

</html>
<script type="text/javascript">
$(document).ready(function () {
  $("#sc").click(function () {
    // $.post("https://49srqa487h.execute-api.cn-north-1.amazonaws.com.cn/dev/registerlist").done(function (data) { 
    //   $('#ls').html("");
    //    lst = JSON.parse(data.body);
    //    var strhmtl = '<table>';
    //    for (i=0; i<lst.length; i++) {
    //       strhmtl += ('<tr><td>'+ lst[i].email+'</td>'+ '<td>'+lst[i].signature+'</td>'+'</tr>');
    //       //console.log(item);
    //    }
    //    strhmtl +=('</table');
    //    $('#ls').append(strhmtl);
    //   }).fail(function (err) {
    //     console.log(err);
    //     console.log(JSON.stringify(err));
    //     //alert(err);
    //   });

      $.ajax({
      	url: "https://49srqa487h.execute-api.cn-north-1.amazonaws.com.cn/dev/registerlist",
        type:"POST",
        beforeSend: function(request) {
                 request.setRequestHeader("authorizationToken", $('#auth').val() || "allow");
             },
        //contentType:"application/json; charset=utf-8",
        //dataType:"json",
        success:function(data){
          $('#ls').html("");
          console.log(data);
          lst = JSON.parse(data.body);
          var strhmtl = '<table>';
          for (i=0; i<lst.length; i++) {
              strhmtl += ('<tr><td>'+ lst[i].email+'</td>'+ '<td>'+lst[i].signature+'</td>'+'</tr>');
              //console.log(item);
          }
          strhmtl +=('</table');
          $('#ls').append(strhmtl);
        },
        error:function(error){console.log(error)}
      });
  })
});


    console.log(window.sessionStorage.getItem("token"));
    console.log(window.sessionStorage.getItem("user"));
</script>
